html(lang="en")
    head
        include head
        title Biodivergent Sites and Sounds: map
        style.
            #map {
                width:100%;
                height:100%;
                position:absolute;
                top:0;
                left:0;
                z-index:0;
                bottom:0;
                right:0;
                margin:auto;
            }
            
             #backdrop {
                background-color:navy;
                transition: filter 1s;
                overflow:hidden;
                touch-action:none;
                user-select:none;
                -webkit-user-select: none; 
                background-image:url("svg/element_painting.svg");
                background-size:cover;
                background-repeat:no-repeat;
                background-position:center;
                height:100vh;
                width:100vw;
            }
            
    script.
        window.addEventListener('load',()=>{
            touch.setAction('.visual',{
                start:function(element,e,obj){
                    //- console.log('start')
                    element.style.opacity=0.1;
                },
                enter:function(element,e,obj){
                    //- console.log('enter')
                    element.style.opacity=0.1;
                },
                move:function(element,e,obj){
                    let {x,y} = obj.relative;
                    let {max_x, max_y} = obj.relative.range;
                    //- console.log('move', x, y)
                },
                end:function(element,e,obj){
                    //- console.log('end')
                    element.style.opacity=1;
                },
                leave:function(element,e,obj){
                    //- console.log('leave')
                    element.style.opacity=1;
                }
            })

            touch.setAction('.circle_interact',{
                start:function(element,e,obj){
                    let {id} = element;
                    let halo = document.querySelector(`.circle_halo[data-id="${id}"]`);
                },
                enter:function(element,e,obj){
                    let {id} = element;
                    let halo = document.querySelector(`.circle_halo[data-id="${id}"]`);
                },
                move:function(element,e,obj){
                    let {id} = element;
                    let halo = document.querySelector(`.circle_halo[data-id="${id}"]`);
                    let {x,y} = obj.relative;
                    let {max_x, max_y} = obj.relative.range;
                    console.log('move', x, y)
                },
                end:function(element,e,obj){
                    let {id} = element;
                    let halo = document.querySelector(`.circle_halo[data-id="${id}"]`);
                },
                leave:function(element,e,obj){
                    let {id} = element;
                    let halo = document.querySelector(`.circle_halo[data-id="${id}"]`);
                }
            })
        })
    body 
        main
        #backdrop
        include map/map.html