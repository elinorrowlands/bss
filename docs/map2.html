
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="style.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="crossorigin"/>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@100;200&amp;family=Nunito:wght@200&amp;display=swap" rel="stylesheet"/><!-- Google tag (gtag.js) -->
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-VEV5M9N4V0"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        
        function gtag(){dataLayer.push(arguments);}
        const greyedElementsQuery = 'main,#instruction__layer,.instructions,.banner__title';
        
        var consent = localStorage && localStorage.getItem('consent');
        var consentHasBeenSet = localStorage && localStorage.getItem('consentHasBeenSet');
        
        if (consent === 'granted') {
            gtag('consent', 'update', {
                'ad_storage': 'granted',
                'analytics_storage': 'granted'
            });
        } else {
            if(!localStorage.getItem('consentHasBeenSet')){
                gtag('consent', 'default', {
                'ad_storage': 'denied',
                'analytics_storage': 'denied'
                });
                gtag('set', 'allow_google_signals', false);
                gtag('js', new Date());
                window.addEventListener('load', function() {
                    document.querySelectorAll('.consent').forEach((el)=>{
                        el.style.display = 'block';
                    })
                if(document.querySelectorAll('.consent').length > 0) document.querySelectorAll(greyedElementsQuery).forEach(x=>x.classList.add('greyed'));    
                });
            }
            
        }
      
      gtag('config', 'G-VEV5M9N4V0');
      
        function showConsentUI(consentGiven) {
            
            localStorage.setItem('consentHasBeenSet', true);
            if (consentGiven) {
            
                localStorage && localStorage.setItem('consent', 'granted');
                gtag('consent', 'update', {
                    'analytics_storage': 'granted'
                });
            } else {
            
            localStorage && localStorage.setItem('consent', 'denied');
                gtag('consent', 'update', {
                    'analytics_storage': 'denied'
                });
            }
            
            document.querySelectorAll('.consent').forEach((el)=>{
                el.style.display = 'none';
            })
            
            document.querySelectorAll(greyedElementsQuery).forEach(x=>x.classList.remove('greyed'));
        }
    </script>
    <title>Biodivergent Sites and Sounds: map</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.7/dat.gui.min.js"></script>
  </head>
  <body style="background-color: #fff!important;">
    <main></main>
    <object class="svg-import map__layer" id="map2" data="svg/map2a.svg" type="image/svg+xml"></object>
    <object class="svg-import map__layer" id="map" data="svg/map2.svg" type="image/svg+xml"></object>
    <canvas id="overlay"></canvas>
  </body>
  <script>
    function checkLoaded(name) {
        const interval = 100;
        window.setTimeout(function() {
            if (window[name]) {
                window[name]();
            } else {
                checkLoaded(name);
            }
        }, interval);
    }
  </script>
  <script type="module">
    //- checkLoaded('mapLoad')
    Tone.start();
    document.querySelectorAll('#water_halo path').forEach((x,i)=>{
        x.classList.add('visual');
        x.id = `water_halo_${i}`;
    })
  </script>
</html>