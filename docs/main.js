(()=>{"use strict";var e=function(e,t){Object.entries(t).forEach((t=>{let[n,o]=t;switch(n){case"custom":Object.entries(o).forEach((t=>e.setAttribute(...t)));break;case"style":Object.entries(o).forEach((t=>e.style[t[0]]=t[1]));break;case"dataset":Object.entries(o).forEach((t=>e.dataset[t[0]]=t[1]));break;default:e[n]=o}}))},t=t||"http://www.w3.org/2000/svg",n=function(n,o,r=document){let i=r.createElementNS(t,n);return e(i,o),i},o=function(e,t,o,r={},i){i||"undefined"==typeof document||(i=document);let s={custom:{attributeName:"fill",begin:"indefinite",repeatCount:"1",dur:"1s",fill:"freeze",keyTimes:"0; 1",values:"red; blue"}};"object"==typeof arguments[0]&&(Object.assign(s.custom,arguments[0].custom),"dur"in s.custom||(s.custom.dur=`${arguments[0].duration}s`),t=arguments[0].events,o=arguments[0].duration,arguments.length>1&&(i=arguments[1]));let c="",a="";if(!Array.isArray(t)){let e=[];Object.keys(t).forEach((n=>{e.push([n,t[n]])})),(t=e).sort(((e,t)=>e[0]-t[0]))}t.forEach((([e,n],o)=>{parseFloat(e)%1==0&&(e+=".00");let r=o<Object.keys(t).length-1?"; ":"";a+=`${e}${r}`,c+=`${n}${r}`})),s.custom.values=c,s.custom.keyTimes=a;let u=n("translate"==e?"animateTransform":"animate",s,i);return u=Object.assign(u,r),u},r=function(e,t,n,o=!1){return(e=o?Math.floor(e):e)>n?n:e<t?t:e},i=function(t,n,o){o||"undefined"==typeof document||(o=document);let r=o.createElement(t);return e(r,n),r},s=function(e,t=0){return e=Tone.Frequency(e,"midi").transpose(t),Tone.Frequency(e,"midi").toFrequency()},c=function(e,t=0){return e=Tone.Frequency(e).transpose(t),Tone.Frequency(e).toFrequency()};const a=function(e){return e.trim().split(/\n\s*\n/).map(((e,t)=>{const n=e.trim().split(/\n/),[o,r]=n[1].split(" --\x3e "),i=[o.replace(",","."),r.replace(",",".")],s=n.slice(2).join("\n");return`${t+1}\n${i[0]},${i[1]}\n${s}\n`})).join("")};function u(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","filter");return n.setAttribute("id",e),n.setAttribute("filterUnits",t),n}function l(e,t,n){const o=document.createElementNS("http://www.w3.org/2000/svg","feColorMatrix");return o.setAttribute("id",e),o.setAttribute("type",t),o.setAttribute("values",n),o}function f(e){const t=document.createElementNS("http://www.w3.org/2000/svg","feComponentTransfer");return t.setAttribute("id",e),t}function d(e){const t=document.createElementNS("http://www.w3.org/2000/svg","animate");return Object.keys(e).forEach((n=>{t.setAttribute(n,e[n])})),t}function m(e){const t=u(e.id,e.filterUnits),n=f("feComponentTransfer1");return t.appendChild(n),Object.keys(e.components).forEach((n=>{const o=e.components[n],r=l(o.id,o.type,o.values);t.appendChild(r)})),Object.keys(e.animations).length>0&&Object.keys(e.animations).forEach((n=>{const o=d(e.animations[n]);t.appendChild(o)})),t}function h(e){return parseInt(e,16)/255}function p(e){let t=Math.round(255*e).toString(16);return t=1===t.length?`0${t}`:t,t}const g=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e);console.log("running cm-toolbox");var b={CSSToggle:class{constructor(e,t=!1,n=.1,o=.3,r="hc--light",i="fill"){this.element=e,this.on=t,this.attack=n,this.release=o,this.effectClass=r}toggle(){this.on=!this.on;let{element:e,on:t,attack:n,release:o,effectClass:r}=this;e.style.transition=`fill ${t?n:o}s ease`,e.classList[t?"add":"remove"](r)}trigger(e,t=!0){this.on=e;let{element:n,attack:o,release:r,effectClass:i}=this;n.style.transition=`fill ${e?o:r}s ease`,n.classList[e?"add":"remove"](i)}set attack(e){this._attack=e}set release(e){this._release=e}},addAnimation:function(e,t,n,r,i={},s){s||"undefined"==typeof document||(s=document);let c,a="object"==typeof e?e:s.getElementById(e);if("object"==typeof arguments[1]){let e={custom:{}};Object.assign(e,arguments[1]),arguments.length>2&&(s=arguments[2]),"id"in e.custom||(e.custom.id=`${a.id}_${t}`),c=o(e,s)}else"id"in i||(i.id=`${a.id}_${t}`),c=o(t,n,r,i,s);return a.appendChild(c),c},constrain:r,create:i,createFilter:function(e,t){let r={filter:n("filter",{id:e,custom:{filterUnits:"objectBoundingBox",x:"0",y:"0",width:"100%",height:"100%"}}),animation:{},update:{}};return"string"==typeof t&&(t=[t]),t.forEach((i=>{r[i]=n("feColorMatrix",{id:`${e}_${i}`,custom:{type:t,in:"SourceGraphic",values:0}}),r.filter.appendChild(r[i]),r.animation[i]=o("values",[[0,0],[1,1]],.1),r[i].appendChild(r.animation[i]),r.update[i]=function(e,t="unspecified",n="unspecified"){"unspecified"==n&&(n=r[i].values.animVal.getItem("value").value),"unspecified"!=t&&r.animation[i].setAttribute("dur",`${t}s`),r.animation[i].setAttribute("values",`${n};${e}`),console.log(r.animation[i]),r.animation[i].beginElement()}})),r},createAnimation:o,createNS:n,emit:function(e,t={}){document.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0,composed:!1}))},ftos:function(e,t=0){return sym=Tone.Frequency(e).transpose(t),Tone.Frequency(e).toNote()},getTranslate:e=>{const t=getComputedStyle(e).transform,{e:n,f:o}="none"==t?{e:0,f:0}:new DOMMatrix(t);return{x:n,y:o}},hexToInt:function(e){let t=[0,0];for(let n=0;n<2;n++)t[n]=e.charCodeAt(n),t[n]-=t[n]>=65?55:48;return t[0]*=16,t[0]+t[1]},interpolate:function(e,t,n,o=!1){let r=(1-n)*e+n*t;return r=o?Math.floor(r):r,r},intToHex:function(e){let t=[0,0];t[0]=Math.floor(e/16),t[1]=e%16;for(let e in t)t[e]=t[e]>9?String.fromCharCode(t[e]+55):t[e];return`${t[0]}${t[1]}`},map:function(e,t,n,o,i,s=!1,c=!1){return e=(e-t)*(i-o)/(n-t)+o,e=c?Math.floor(e):e,s?r(e,o,i):e},mtof:s,mtos:function(e,t=0){return e=Tone.Frequency(e,"midi").transpose(t),Tone.Frequency(e,"midi").toNote()},populate:function(e,t,n=!1,o="option"){t.forEach((t=>{e.appendChild(i(o,{value:t,innerHTML:t})),0!=n&&(e.value=n)}))},rot:function(e,t){let n=[e.slice(t),e.slice(0,t)];return n[0].concat(n[1])},set:e,setInTree:function(e=[],t=0,n=this){"string"==typeof e&&(e=e.split("_"));var o=n;e.forEach(((e,t,n)=>{t<n.length-1&&(o=o[e])})),console.log(o,t),o[e[e.length-1]]=t},setNS:function(e,t){Object.entries(t).forEach((t=>{let[n,o]=t;switch(n){case"custom":Object.entries(o).forEach((t=>{e.setAttributeNS(xmlns,...t)}));break;case"style":Object.entries(o).forEach((t=>e.style[t[0]]=t[1]));break;default:e[n]=o}}))},srtToSbv:a,stom:function(e,t=0){return e=Tone.Frequency(e).transpose(t),Tone.Frequency(e).toMidi()},stof:c,toggleFullscreen:()=>document.fullscreenElement?(document.exitFullscreen(),!0):document.webkitFullscreenElement?(document.webkitExitFullscreen(),!0):document.documentElement.requestFullscreen?(document.documentElement.requestFullscreen(),!0):document.documentElement.webkitRequestFullscreen?(document.documentElement.webkitRequestFullscreen(),!0):(window.top!=window.self?window.top.location.href=window.location.href:window.history.back(),!1),transposeForPlayer:function(e,t){return"string"==typeof e?e=c(e):"number"==typeof e&&(e=s(e)),"string"==typeof t?t=c(t):"number"==typeof t&&(t=s(t)),e/t},v:function(e){return Tone.gainToDb(e)},within:function(e=0,t=0,n={left:0,right:0,top:0,bottom:0}){let o={left:e>=n.left,right:e<=n.right,top:t>=n.top,bottom:t<=n.bottom},r=[];return Object.keys(n).forEach((e=>{e in o&&r.push(o[e])})),r.every((e=>!0===e))},generateSVGFilter:u,generateFeColorMatrix:l,generateFeComponentTransfer:f,generateAnimate:d,addFiltersToDefs:function(e,t=document.querySelector("svg")){Object.keys(e).forEach((t=>{const n=m(e[t]);if(!document.querySelector("svg defs")){const e=document.createElementNS("http://www.w3.org/2000/svg","defs");document.querySelector("svg").insertBefore(e,document.querySelector("svg").firstChild)}document.querySelector("svg defs").appendChild(n)}));const n=t.cloneNode(!0);t.parentNode.replaceChild(n,t)},filterFromDictionary:m,applyFilter:function(e,t){const n=t.cloneNode(!0);n.setAttribute("filter",`url(#${e.id})`),t.parentNode.replaceChild(n,t),document.querySelector(`#${e.id}`).querySelectorAll("animate").forEach((e=>{e.setAttribute("href",`#${e.getAttribute("href").slice(1)}${t.id}`),e.setAttribute("id",`${e.getAttribute("id")}${t.id}`)}))},setSvgTextClass:function(e,t,n="selected"){Array.from(e.children).filter((e=>"svg"==e.tagName)).forEach((e=>{e.querySelectorAll("text").forEach((e=>{e.classList[t](n)}))}))},hexToRGB:function(e){return[h(e.slice(1,3)),h(e.slice(3,5)),h(e.slice(5,7))]},RGBToHSL:function(e,t,n){let o,r,i=Math.max(e,t,n),s=Math.min(e,t,n),c=(i+s)/2;if(i==s)o=r=0;else{var a=i-s;switch(r=c<.5?a/(i+s):a/(2-i-s),i){case e:o=(t-n)/a+(t<n?6:0);break;case t:o=(n-e)/a+2;break;case n:o=(e-t)/a+4}o/=6}return o=Math.round(360*o),r=Math.round(100*r),c=Math.round(100*c),[o,r,c]},HSLToHex:function(e,t,n){let o;if(e/=360,n/=100,0==(t/=100))o=[n,n,n];else{const r=n<.5?n*(1+t):n+t-n*t,i=2*n-r;o=[g(i,r,e+1/3),g(i,r,e),g(i,r,e-1/3)]}return o=o.map((e=>p(e))),`#${o.join("")}`},floatToHexDigit:p,hexDigitToFloat:h};"undefined"!=typeof module&&module.exports?(console.log("cm-toolbox running in node...success!"),module.exports=b):"undefined"!=typeof globalThis?globalThis.CM=b:"undefined"!=typeof window&&(window.CM=b),window.srtToSbv=a})();