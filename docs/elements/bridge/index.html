<!DOCTYPE html>
<head><!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VEV5M9N4V0"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      
      function gtag(){dataLayer.push(arguments);}
      const greyedElementsQuery = 'main,#instruction__layer,.instructions,.banner__title';
      
      var consent = localStorage && localStorage.getItem('consent');
      var consentHasBeenSet = localStorage && localStorage.getItem('consentHasBeenSet');
      console.log(localStorage && localStorage.getItem('consent'));
      if (consent === 'granted') {
          gtag('consent', 'update', {
              'ad_storage': 'granted',
              'analytics_storage': 'granted'
          });
      } else {
          if(!localStorage.getItem('consentHasBeenSet')){
              gtag('consent', 'default', {
              'ad_storage': 'denied',
              'analytics_storage': 'denied'
              });
              gtag('set', 'allow_google_signals', false);
              gtag('js', new Date());
              window.addEventListener('load', function() {
                  document.querySelectorAll('.consent').forEach((el)=>{
                      el.style.display = 'block';
                  })
              if(document.querySelectorAll('.consent').length > 0) document.querySelectorAll(greyedElementsQuery).forEach(x=>x.classList.add('greyed'));    
              });
          }
          
      }
    
    gtag('config', 'G-VEV5M9N4V0');
    
      function showConsentUI(consentGiven) {
          //- console.log(consentGiven);
          //- var consentGiven = confirm("We use cookies to improve your experience. Do you accept?");
          localStorage.setItem('consentHasBeenSet', true);
          if (consentGiven) {
          // User accepted, update consent settings
          localStorage && localStorage.setItem('consent', 'granted');
              gtag('consent', 'update', {
                  'analytics_storage': 'granted'
              });
          } else {
          // User declined, update consent settings
          localStorage && localStorage.setItem('consent', 'denied');
              gtag('consent', 'update', {
                  'analytics_storage': 'denied'
              });
          }
          document.querySelectorAll('.consent').forEach((el)=>{
              el.style.display = 'none';
          })
          document.querySelectorAll(greyedElementsQuery).forEach(x=>x.classList.remove('greyed'));
      }
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BSS: Bridge</title>
  <link rel="stylesheet" href="../../style.css">
  <!-- main.js was previously deferred..-->
  <script src="../../main.js"></script>
  <!-- bridge_interact.js was previously deferred..-->
  <script src="./bridge_interact.js" type="module" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
  <script src="p5trails.js" defer></script>
</head>
<body class="fullpage bridge">
  <div class="bridge" id="backdrop"></div>
  <main class="bridge container awaitStart transparent">
    <div class="photo__container"></div>
    <div class="vectorised__container"></div>
    <div class="bridge__container"></div>
    <div class="boundary__container"></div>
    <div class="beyond__container"></div>
    <object class="bridge svg-import" id="bridge" data="svg/bridge_october.svg" type="image/svg+xml"></object>
    <object class="bridge svg-import" id="bridge__boundary" data="svg/boundary.svg" type="image/svg+xml"></object><img class="svg bridge bridge__sky" id="bridge__sky1" src="svg/bridge__sky1.png"><img class="svg bridge bridge__sky" id="bridge__sky2" src="svg/bridge__sky2.png"><img class="svg bridge bridge__sky" id="bridge__sky3" src="svg/bridge__sky3.png"><img class="svg bridge bridge__sky" id="bridge__sky4" src="svg/bridge__sky4.png">
  </main>
  <div class="allowDefault" id="toolbar">
    <div id="play__container">
      <button id="play">PLAY</button>
    </div>
    <div id="effect__container">
      <label for="effect__echo">Echo time</label>
      <input class="fader" id="effect__echo" type="range" min="0" max="1" step="0.01" value="0.5">
      <label for="effect__echo">Echo amount</label>
      <input class="fader" id="effect__echo" type="range" min="0" max="1" step="0.01" value="0.5">
      <label for="effect__lpf">Lowpass filter</label>
      <input class="fader" id="effect__lpf" type="range" min="0" max="1" step="0.01" value="0.5">
      <label for="effect__comb__time">Comb time</label>
      <input class="fader" id="effect__comb__time" type="range" min="0.1" max="0.9" step="0.01" value="0.5">
      <label for="effect__comb__feedback">Comb resonance</label>
      <input class="fader" id="effect__comb__feedback" type="range" min="0" max="0.9" step="0.01" value="0.5">
    </div>
    <div id="colour-picker__container">
      <label for="colour-picker">Colour picker</label>
      <input id="colour-picker" type="color" value="#0000ff">
    </div>
    <div id="states__containers">
      <button id="states__save__1">SAVE 1</button>
      <button id="states__save__2">SAVE 2</button>
      <input id="states__interpolate" type="range" min="0" max="1" step="0.01" value="0.5">
    </div>
  </div>
  <div id="instruction__layer">
    <section class="instructions flex scrollable">
      <div class="instructions__header">
        <h1 class="instructions">- 1 - </h1>
      </div>
      <div class="instructions__number">
        <h1 class="instructions">Bridge</h1>
      </div>
      <div class="instructions__text"><p>When a duck swims under a bridge,</p>
<p>its quacks echo</p>
<p>across the landscape,</p>
<p>sky, waterways and stars.</p>
<p>The space of its greeting exists</p>
<p>in all of the environment.</p>

      </div>
      <div class="instructions__button">
        <button class="button startElement allowDefault waiting" id="nav__start">Loading</button>
      </div>
      <div class="instructions__interactions"> 
        <h2 class="instructions__heading">Interactions</h2>
        <div class="break"></div>
        <ul>
          <li>
            <object class="instructions__icon" data="../../icons/single_click.svg" type="image/svg+xml" aria-hidden="true"></object><span>single touch or mouse</span>
          </li>
          <li>
            <object class="instructions__icon" data="../../icons/explore.svg" type="image/svg+xml" aria-hidden="true"></object><span>move touch to explore</span>
          </li>
        </ul>
        <div class="break"></div>
        <h2 class="instructions__heading">Changes</h2>
        <div class="break"></div>
        <ul> 
          <li>
            <object class="instructions__icon" data="../../icons/sound.svg" type="image/svg+xml" aria-hidden="true"></object><span>sound</span>
          </li>
          <li>
            <object class="instructions__icon" data="../../icons/colour.svg" type="image/svg+xml" aria-hidden="true"></object><span>colour</span>
          </li>
          <li>
            <object class="instructions__icon" data="../../icons/brightness.svg" type="image/svg+xml" aria-hidden="true"></object><span>brightness</span>
          </li>
        </ul>
      </div>
      <footer class="instructions">
        <p class="footer__content" aria-label="project partners"><a href="https://canalrivertrust.org.uk/"><img class="logo-fit" id="logo__canal2" src="../../logos/canal-and-river-trust-logo-nostrap.svg" alt="Canal &amp; River Trust"></a><a href="https://www.artscouncil.org.uk/"><img class="logo-fit" id="logo__ace2" src="../../logos/lottery_Logo_White.png" alt="Arts Council England Lottery Funded"></a><a href="https://www.colesgallery.co.uk/"><img class="logo-fit" id="logo__coles2" src="../../logos/coles.png" alt="Cole's Gallery"></a><a href="https://www.creativehealthcamden.com/"><img class="logo-fit" id="logo__chc2" src="../../logos/chc.png" alt="Creative Health Camden"></a></p>
      </footer>
    </section>
  </div>
  <div class="consent" style="display:none;">
    <p>This website uses cookies to improve your experience and to help us create future projects. </p>
    <p>We do not collect any personal data such as name or contact details.</p>
    <button class="allowDefault">ACCEPT</button>
    <button class="allowDefault">DECLINE</button>
    <hr>
    <details>
      <summary>MORE INFORMATION</summary>
      <p>The website uses a minimal build of Google Analytics, a service which transmits website traffic data to Google servers in the United States and allows us to notice trends to improve the user experience on our website. </p>
      <p>This processes personal data such as: the unique User ID set by Google Analytics, the date and time, the title of the page being viewed, the URL of the page being viewed, the URL of the page that was viewed prior to the current page, the screen resolution, the time in local timezone, the links clicked on to an outside domain, the type of device, and the country, region, and city.</p>
      <p>You may opt out of this tracking at any time by activating the “Do Not Track” setting in your browser.</p>
    </details>
    <script>
      document.querySelectorAll('.consent button').forEach(x=>{
          x.addEventListener('click', function(e){
          if(e.target.textContent === 'ACCEPT'){
              showConsentUI(true);
          } else {
              showConsentUI(false);
              
          }
          document.querySelectorAll('.consent').forEach((el)=>{
              el.style.display = 'none';
          })
      })
      });
    </script>
  </div>
</body>